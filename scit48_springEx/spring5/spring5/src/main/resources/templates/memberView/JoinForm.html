<!DOCTYPE html>
<html xmlns:th="thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>joinForm.html</title>
    <link rel="stylesheet" th:href="@{/css/main.css}">
    <script>
        window.onload = function(){
            const joinForm = document.querySelector("#joinForm");
            const openButton = document.querySelector("#openButton");
            const memberId = document.querySelector("#memberId");

            joinForm.addEventListener("submit", validation);

            openButton.addEventListener("click", idWindowOpen);
            memberId.addEventListener("click", idWindowOpen);
            }


            // ì¤‘ë³µ í™•ì¸ ì°½ ì—´ê¸°
            function  idWindowOpen() {
                const width = 600;
                const height = 400;

                //window.screenX : í˜„ì¬ ë¸Œë¼ìš°ì € ì°½ì˜ í™”ë©´ìƒ ì‹œì‘ Xì¢Œí‘œ
                //window.outerWidth : ë¸Œë¼ìš°ì € ì „ì²´ ê°€ë¡œ ê¸¸ì´
                const left = window.screenX + (window.outerWidth / 2) - (width /2);
                const top = window.screenY + (window.outHeight /2) - (height /2);


                let w = window.open('idCheck', 'idWind', `width=${width}, height=$[height}, left = ${left}, top = ${top}`);

                //íŒì—…ì°½ì— ë°ì´í„° ì „ë‹¬
                setTimeout(() => {
                        w.document.querySelector("#test").textContent = "íŒì—…ì°½ì— ê°’ ì „ë‹¬";
                    },2000);
            }



        function validation(e) {
            let id = document.querySelector("#memberId");
            let pw = document.querySelector("#memberPassword");
            let pw2 = document.querySelector("#memberPassword2");
            let name = document.querySelector("#memberName");
            let msgBox = document.querySelector("#msgBox");

            msgBox.textContent = ""; // ì´ì „ ë©”ì‹œì§€ ì´ˆê¸°í™”

            if(id.value.length < 3 || id.value.length > 10) {
                msgBox.textContent = "ì•„ì´ë””ëŠ” 3~10ì ì‚¬ì´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.";
                e.preventDefault();
                return;
            }
            if (pw.value.length < 3 || pw.value.length > 10) {
                msgBox.textContent = "ë¹„ë°€ë²ˆí˜¸ëŠ” 3~10ì ì‚¬ì´ë¡œ ì…ë ¥í•´ì£¼ì„¸ìš”.";
                e.preventDefault();
                return false;
            }
            if (pw.value !== pw2.value) {
                msgBox.textContent = "ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.";
                e.preventDefault();
                return false;
            }
            if (name.value.trim() === ""){
                msgBox.textContent = "ì´ë¦„ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.";
                e.preventDefault();
                return false;
            }
            msgBox.textContext = ""; // ì´ˆê¸°í™”
        }
    </script>
</head>
<body>
    <header>
        <h1>[ íšŒì› ê°€ì… ]</h1>
    </header>

    <section>
        <div id="msgBox" style="color: red;"></div>
        <form id="joinForm" th:action="@{/member/join}" method="post">
            <table>
                <tr>
                    <th>ID</th>
                    <td>
                        <input type="text" name="memberId" id="memberId" maxlength="10" placeholder="IDì¤‘ë³µí™•ì¸ ì´ìš©">
                        <input type="button" id="openButton" value="IDì¤‘ë³µí™•ì¸">
                    </td>
                </tr>
                <tr>
                    <th>ë¹„ë°€ë²ˆí˜¸</th>
                    <td>
                        <input type="password" name="memberPassword" id="memberPassword" placeholder="ë¹„ë©€ë²ˆí˜¸ ì…ë ¥">
                        <br>
                        <input type="password" id="memberPassword2" placeholder="ë¹„ë°€ë²ˆí˜¸ ë‹¤ì‹œ ì…ë ¥">
                    </td>
                </tr>
                <tr>
                    <th>ì´ë¦„</th>
                    <td>
                    <input type="text" name="memberName" id = "memberName" placeholder= "ì´ë¦„ ê²€ìƒ‰">
                    </td>

                </tr>
                <tr>
                    <th>ì´ë©”ì¼</th>
                    <td><input type="text" name="email" id="email" placeholder="ì´ë©”ì¼ ì…ë ¥">
                    </td>
                </tr>
                <tr>
                    <th>ì „í™”ë²ˆí˜¸</th>
                    <td>
                        <input type="text" name="phone" placeholder="ì „í™”ë²ˆí˜¸ ì…ë ¥">
                    </td>
                </tr>
                <tr>
                    <th>ì£¼ì†Œ</th>
                    <td>
                        <input type="text" name="address" placeholder="ì£¼ì†Œ ì…ë ¥" style="width: 300px;">
                    </td>
                </tr>
            </table>
            <button type="submit">ê°€ì…</button>
            <button type="reset">ë‹¤ì‹œ ì“°ê¸°</button>
        </form>
    </section>
    <script>
<!--        let submit = document.querySelector("button[type='submit']");-->
<!--        submit.addEventListener('click', function(event) {-->
<!--            let id =  document.getElementsByName('memberId')[0];-->
<!--            if( id.value.length < 3 || id.value.length > 10){-->
<!--                alert("3~10ì ì…ë ¥í•´ì£¼ì„¸ìš”í˜¸í˜¸í˜¸");-->
<!--                id.focus();-->
<!--                id.select();-->
<!--                event.preventDefault();-->
<!--            }-->
<!--            let pw = document.querySelector("#memberPassword");-->
<!--            let pw2 = document.querySelector("#memberPassword2");-->

<!--            if( pw.value.length < 3 || pw.value.length > 10){-->
<!--            alert("3~10ì ì…ë ¥í•´ì£¼ì„¸ìš”í˜¸í˜¸í˜¸");-->
<!--            pw.focus();-->
<!--            pw.select();-->
<!--            event.preventDefault();-->
<!--            }-->
<!--            if( pw.value != pw2.value){-->
<!--                alert("ë¹„ë°€ë²ˆí˜¸ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŠµë‹ˆë‹¤. ğŸ¤£");-->
<!--                event.preventDefault();-->
<!--            }-->
<!--            let name = document.querySelector("#memberName");-->

<!--            if( name.value.length < 1 ){-->
<!--                alert("ì´ë¦„ì€ í•œê¸€ì ì´ìƒ ì…ë ¥í•˜ì„¸ìš”.ğŸ‘");-->
<!--                name.focus();-->
<!--                name.select();-->
<!--                event.preventDefault();-->
<!--            }-->
<!--        })-->


    </script>
</body>
</html>